<!DOCTYPE html>
<html lang="cs">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' app:; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline';" />
    <title>AirQ Competition Helpers</title>
    <style>
      :root {
        color-scheme: light;
        --primary: #1976D2;
        --primary-light: #42A5F5;
        --text-primary: #1A202C;
        --text-secondary: #4A5568;
        --bg: #F8FAFC;
        --card-bg: #FFFFFF;
        --border: #E2E8F0;
        --hover-border: #BFDBFE;
        --shadow: rgba(2,136,209,0.12);
      }

      * { box-sizing: border-box; margin: 0; padding: 0; }

      body {
        font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        color: var(--text-primary);
        background: var(--bg);
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }

      header {
        padding: 48px 16px 24px;
        text-align: center;
      }

      header h1 {
        font-size: 2rem;
        font-weight: 700;
        margin-bottom: 8px;
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      header p {
        color: var(--text-secondary);
        font-size: 1.1rem;
      }

      main {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
        padding: 0 16px 48px;
      }

      .apps {
        max-width: 600px;
        margin: 0 auto;
        display: grid;
        gap: 20px;
        width: 100%;
      }

      .card {
        display: flex;
        align-items: center;
        gap: 20px;
        padding: 24px 28px;
        border-radius: 16px;
        background: var(--card-bg);
        border: 2px solid var(--border);
        box-shadow: 0 2px 4px rgba(0,0,0,0.04);
        cursor: pointer;
        transition: all 150ms ease;
        user-select: none;
      }

      .card:hover {
        transform: translateY(-3px);
        border-color: var(--hover-border);
        box-shadow: 0 8px 24px var(--shadow);
      }

      .card:active {
        transform: translateY(-1px);
      }

      .icon {
        width: 56px;
        height: 56px;
        display: grid;
        place-items: center;
        border-radius: 14px;
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
        color: white;
        flex-shrink: 0;
      }

      .icon svg {
        width: 28px;
        height: 28px;
      }

      .meta {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .title {
        font-weight: 700;
        font-size: 1.15rem;
      }

      .desc {
        color: var(--text-secondary);
        font-size: 0.95rem;
      }

      .lang-toggle {
        position: fixed;
        top: 16px;
        right: 16px;
        display: flex;
        gap: 4px;
        background: var(--card-bg);
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 4px;
      }

      .lang-btn {
        padding: 6px 12px;
        border: none;
        background: transparent;
        border-radius: 6px;
        cursor: pointer;
        font-size: 0.9rem;
        color: var(--text-secondary);
        transition: all 100ms ease;
      }

      .lang-btn.active {
        background: var(--primary);
        color: white;
      }

      .lang-btn:hover:not(.active) {
        background: var(--border);
      }

      footer {
        text-align: center;
        color: var(--text-secondary);
        padding: 16px;
        font-size: 0.85rem;
      }
    </style>
  </head>
  <body>
    <div class="lang-toggle">
      <button class="lang-btn active" data-lang="cs">CZ</button>
      <button class="lang-btn" data-lang="en">EN</button>
    </div>

    <header>
      <h1 data-i18n="title">AirQ Competition Helpers</h1>
      <p data-i18n="subtitle">Vyberte aplikaci</p>
    </header>

    <main>
      <div class="apps">
        <div class="card" data-app="map-corridors" role="button" tabindex="0">
          <span class="icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon>
              <line x1="8" y1="2" x2="8" y2="18"></line>
              <line x1="16" y1="6" x2="16" y2="22"></line>
            </svg>
          </span>
          <span class="meta">
            <span class="title" data-i18n="corridors-title">Foto koridory</span>
            <span class="desc" data-i18n="corridors-desc">Interaktivní vizualizace koridorů</span>
          </span>
        </div>

        <div class="card" data-app="photo-helper" role="button" tabindex="0">
          <span class="icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              <circle cx="8.5" cy="8.5" r="1.5"></circle>
              <polyline points="21 15 16 10 5 21"></polyline>
            </svg>
          </span>
          <span class="meta">
            <span class="title" data-i18n="photo-title">Foto pomocnik</span>
            <span class="desc" data-i18n="photo-desc">Organizace a oznacovani souteznych fotek</span>
          </span>
        </div>
      </div>
    </main>

    <footer>
      <span data-i18n="footer">AirQ Competition Helpers - Desktop Edition</span>
    </footer>

    <script>
      // Translations
      const translations = {
        cs: {
          'title': 'AirQ Competition Helpers',
          'subtitle': 'Vyberte aplikaci',
          'corridors-title': 'Foto koridory',
          'corridors-desc': 'Interaktivni vizualizace koridoru',
          'photo-title': 'Foto pomocnik',
          'photo-desc': 'Organizace a oznacovani souteznich fotek',
          'footer': 'AirQ Competition Helpers - Desktop Edition'
        },
        en: {
          'title': 'AirQ Competition Helpers',
          'subtitle': 'Select an application',
          'corridors-title': 'Photo Corridors',
          'corridors-desc': 'Interactive corridor visualization',
          'photo-title': 'Photo Helper',
          'photo-desc': 'Competition photo organization and labeling',
          'footer': 'AirQ Competition Helpers - Desktop Edition'
        }
      };

      let currentLang = localStorage.getItem('desktop-lang') || 'cs';

      function setLanguage(lang) {
        currentLang = lang;
        localStorage.setItem('desktop-lang', lang);

        // Update UI
        document.querySelectorAll('[data-i18n]').forEach(el => {
          const key = el.getAttribute('data-i18n');
          if (translations[lang][key]) {
            el.textContent = translations[lang][key];
          }
        });

        // Update button states
        document.querySelectorAll('.lang-btn').forEach(btn => {
          btn.classList.toggle('active', btn.dataset.lang === lang);
        });
      }

      // Initialize language
      setLanguage(currentLang);

      // Language toggle
      document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.addEventListener('click', () => setLanguage(btn.dataset.lang));
      });

      // Card navigation
      document.querySelectorAll('.card').forEach(card => {
        const navigate = () => {
          const appName = card.dataset.app;
          if (window.electronAPI) {
            window.electronAPI.navigateToApp(appName);
          } else {
            // Fallback for testing in browser
            window.location.href = `app://${appName}/index.html`;
          }
        };

        card.addEventListener('click', navigate);
        card.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            navigate();
          }
        });
      });
    </script>
  </body>
</html>
